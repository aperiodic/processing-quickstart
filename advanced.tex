%%
%% This is file `leaflet-manual.tex',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% leaflet.dtx  (with options: `manual')
%%
%% Copyright (C) 2003, 2004
%% Rolf Niepraschk, Rolf.Niepraschk@ptb.de
%% Hubert Gaesslein, HubertJG@open.mind.de
%%
%% This work may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either version 1.3
%% of this license or (at your option) any later version.
%% The latest version of this license is in
%%   http://www.latex-project.org/lppl.txt
%% and version 1.3 or later is part of all distributions of LaTeX
%% version 2003/12/01 or later.
%%
%% This work has the LPPL maintenance status "author-maintained".
%%
\def\filename{leaflet-manual.tex}
\def\fileversion{v1.0d}   % change this when leaflet-manual changed, too.
\def\filedate{2012/06/04}
\def\docdate {2012/06/04} % change this when leaflet-manual changed, too.
\listfiles
\errorcontextlines=99
\documentclass[
%%notumble,
%%nofoldmark,
%%dvipdfm,
%%portrait,
%%titlepage,
%%nocombine,
%%a3paper,
%%debug,
%%nospecialtricks,
%%draft,
]{leaflet}


\renewcommand*\foldmarkrule{.3mm}
\renewcommand*\foldmarklength{5mm}

\usepackage[T1]{fontenc}
\usepackage{textcomp}
\usepackage{mathptmx}
\usepackage[scaled=0.9]{helvet}
\makeatletter
\def\ptmTeX{T\kern-.1667em\lower.5ex\hbox{E}\kern-.075emX\@}
\DeclareRobustCommand{\ptmLaTeX}{L\kern-.3em
        {\setbox0\hbox{T}%
         %\vb@xt@ % :-)
         \vbox to\ht0{\hbox{%
                            \csname S@\f@size\endcsname
                            \fontsize\sf@size\z@
                            \math@fontsfalse\selectfont
                            A}%
                      \vss}%
        }%
        \kern-.12em
        \ptmTeX}
\makeatother
\let\TeX=\ptmTeX
\let\LaTeX=\ptmLaTeX
\usepackage{shortvrb}
\MakeShortVerb{\|}
\usepackage{url}
\usepackage{graphicx}
\usepackage[dvipsnames,usenames]{color}
\usepackage{listings}
\definecolor{LIGHTGRAY}{gray}{.9}

%%%%\renewcommand{\descfont}{\normalfont}
\newcommand\Lpack[1]{\textsf{#1}}
\newcommand\Lclass[1]{\textsf{#1}}
\newcommand\Lopt[1]{\texttt{#1}}
\newcommand\Lprog[1]{\textit{#1}}

\newcommand*\defaultmarker{\textsuperscript\textasteriskcentered}

\vspace{-2em}

\title{\vspace{-1.5em}Dynamic Processing!\\
Functions \& Animation\vspace{-2ex}}
\author{%
  Dan Lidral-Porter\vspace{-2ex}
}
\date{}

\CutLine*{1}
\CutLine*{6}

%AddToBackground{5}{%  Background of a small page
% \put(0,0){\textcolor{Cerulean}{\rule{\paperwidth}{\paperheight}}}}
%
%AddToBackground*{2}{% Background of a large page
% \put(\LenToUnit{.5\paperwidth},\LenToUnit{.5\paperheight}){%
%   \makebox(0,0)[c]{%
%     \resizebox{.9\paperwidth}{!}{\rotatebox{35.26}{%
%       \textsf{\textbf{\textcolor{LIGHTGRAY}{BACKGROUND}}}}}}}}

\begin{document}

\definecolor{framegrey}{rgb}{0.7,0.7,0.7}

\lstset{language=Java
       ,basicstyle=\ttfamily
       ,frame=single
       ,rulecolor=\color{framegrey}
       }

\maketitle
\thispagestyle{empty}

%%\LARGE

\vspace{-2em}

\section{Writing Functions}

You've been using Processing's built-in functions such as \texttt{size}, \texttt{color}, and \texttt{rect}, but you can write functions of your own.
Functions need to be defined before you can use them.
A \textit{function definition} has this general form:

\begin{lstlisting}
<type> <name>(<arguments>) {
  ...
  return <instance-of-type>;
}
\end{lstlisting}
\vspace{-0.5em}
where
\begin{itemize}
  \item \texttt{<type>} defines what sort of value the function will return.
        It can be a variable type, like \texttt{int} or \texttt{float}, or the special function type \texttt{void}, which means "no value."
  \item \texttt{<name>} is the function's name, which is what you'll type to use the function.
  \item \texttt{<arguments>} can be any number of \textit{argument specifications} (even zero), seperated by commas.
        Each argument specification is exactly the same as a variable definition: a variable type, and then a name.
  \item The \texttt{...} represents any number of statements.
  \item The \texttt{<instance-of-type>} is any value or variable with the same type as the function (that is, it has type \texttt{<type>}).
        If the type is \texttt{void}, then skip this part (because the function doesn't return any value).
\end{itemize}

There's a lot of moving parts here, so I'll show you a concrete example.
The following excerpt defines a function named \texttt{multiply} that has type \texttt{int}, takes two \texttt{int} arguments named \texttt{x} and \texttt{y}, and returns the result of multiplying \texttt{x} and \texttt{y} together.

\begin{lstlisting}
int multiply(int x, int y) {
  return (x * y);
}
\end{lstlisting}

\textbf{Exercise 3.1:} go back to the previous page and compare the general function definition form with the specific definition of \texttt{multiply}.
Do you see how each part of the general form is used in the definition of \texttt{multiply}?

\textbf{Exercise 3.2:} write your own function named \texttt{multiply3} that has type \texttt{float}, takes three \texttt{float} arguments, and returns the result of multiplying all three of its arguments together.

\textbf{Exercise 3.3:} write a function that takes zero arguments.

\subsection{Function Signatures}

Documentation references will often use a function and its arguments together in a form called the \textit{function signature}.
The Processing reference documentation[1] uses function signatures to show all the different ways that a function can be called in the "Syntax" section, and gives individual explanations for all its arguments below in the "Parameters" section (\textit{parameters} is another term for arguments).

The signature is the first part of a function definition, but has all of the types omitted
The signature of the \texttt{multiply} function that was defined previously is \texttt{multiply(x, y)}.

Let me introduce a new function by way of its signature.
The signature is \texttt{divide\_width(slices)}.
You can use \texttt{divide\_width} to divy up the canvas horizontally into however many \texttt{slices} you give it.
It returns the pixel width of $1/\texttt{slices}$ of the canvas.
For example, if \texttt{slices} is 2, it returns half of the canvas's width; if it's 4, it returns a quarter, and so on.

Here's the definiton of \texttt{divide\_width}:
\begin{lstlisting}
int divide_width(int slices) {
  return width / slices;
}
\end{lstlisting}

\textbf{Exercise 3.4} define \texttt{divide\_height}.

Since functions return a value, you can use a function instead of typing literal numeric value in a variable definition.

For example you could define
\begin{lstlisting}
int square_width = divide_width(8);
\end{lstlisting}
\vspace{-0.5em}
to draw squares that are $1/8$ the width of the canvas.

\section{Get on With the Animating Already}

You might well ask what functions have to do with making things move.
The answer is that Processing animates sketches by looking for a function named \texttt{draw}, and calling it over and over again.

The point of \texttt{draw} is to repeat a bunch of Procesing commands in order to draw things on your canvas.
In this way, \texttt{draw} is different from \texttt{divide\_width} because the point of calling \texttt{draw} is not to get some value back to use.
Its type is \texttt{void}, the special "no value" function type I mentioned on the previous page.
In fact, \texttt{draw} doesn't even take any arguments, either!

\textbf{Exercise 3.5:} see what happens when you try to use \texttt{draw} to define the value of an \texttt{int} variable.

If Processing finds that you have defined a \texttt{draw} function in your sketch, it runs it over and over, 60 times a second, forever.
Each run of \texttt{draw} is called a \textit{frame}
Sketches usually begin by using one-time function that configure the sketch, like \texttt{size}.
In order to avoid running these every frame (which would slow down your sketch considerably), you can put them inside a \texttt{setup} function, which Processing will only run once at the beginning of the sketch, before going into the draw loop.
\texttt{setup} also doesn't return anything, and also takes no arguments.

While \texttt{draw} does not have any inputs, there is a special variable Processing provides named \texttt{frameCount}, which counts how many frames there have been.
The easiest way to make your sketch move is to use \texttt{frameCount} in your sketch as an input to another function, so those inputs will change over time.

The following sketch has possibly the simplest form of animation: moving a shape across the screen.
This is achieved by setting the \textit{x}-coordinate to a multiple of \texttt{frameCount}.
\begin{lstlisting}
 void setup() {
  size(1280, 720);
  colorMode(HSB, 360, 100, 100);
  background(0, 0, 25);
  fill(8, 79, 96);
  stroke(0, 0, 100);
  strokeWeight(6);
}

void draw() {
  int hh = height / 2;
  int qh = height / 4;

  ellipse(frameCount*10, hh, qh, qh);
}
\end{lstlisting}
Wheee, it moves!

\loggingall
\end{document}
\endinput
%%
%% End of file `leaflet-manual.tex'.
